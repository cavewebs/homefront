"use strict";function _dntEnabled(a,b){var c=a||navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,d=b||navigator.userAgent,e=d.match(/Firefox\/(\d+)/),f=/MSIE|Trident/i,g=f.test(d),h=d.match(/Windows.+?(?=;)/g);return!(g&&"function"!=typeof Array.prototype.indexOf)&&(c=e&&32>parseInt(e[1],10)?"Unspecified":g&&h&&-1!==["Windows NT 6.1","Windows NT 6.2","Windows NT 6.3"].indexOf(h.toString())?"Unspecified":{0:"Disabled",1:"Enabled"}[c]||"Unspecified","Enabled"===c)}async function sendForm(a,b={}){const c=await fetch(`/user/${a}`,{headers:{"Content-Type":"application/json; charset=utf-8"},mode:"same-origin",method:"POST",body:JSON.stringify(b)});return c.redirected?void(window.location=c.url):await c.json()}async function sendCommunicationOption(a){const{formAction:b,commOption:c,csrfToken:d}=a.target.dataset;sendForm(b,{communicationOption:c,_csrf:d}).then(()=>{}).catch(()=>{})}async function resendEmail(a){const b=a.target,{formAction:c,csrfToken:d,emailId:e}=b.dataset;b.classList.add("email-sent"),await sendForm(c,{_csrf:d,emailId:e}).then(()=>{setTimeout(()=>{const a=b.nextElementSibling;a.classList.remove("hide")},1e3)}).catch(()=>{})}if(document.querySelector(".email-card")){const a=document.querySelectorAll(".resend-email");a.forEach(a=>{a.addEventListener("click",resendEmail)});const b=document.querySelectorAll(".radio-comm-option");b.forEach(a=>{a.addEventListener("click",sendCommunicationOption)})}const removeMonitorButton=document.querySelector(".remove-fxm");removeMonitorButton&&removeMonitorButton.addEventListener("click",async a=>{const{formAction:b,csrfToken:c,primaryToken:d,primaryHash:e}=a.target.dataset;await sendForm(b,{_csrf:c,primaryToken:d,primaryHash:e})}),"use strict";function getFxAppLinkInfo(a,b){return[[a.fxSend,"https://send.firefox.com/","fx-send"],[a.fxMonitor,"https://monitor.firefox.com/","fx-monitor"],[a.pocket,"https://app.adjust.com/hr2n0yz?engagement_type=fallback_click&fallback=https%3A%2F%2Fgetpocket.com%2Ffirefox_learnmore%3Fsrc%3Dff_bento&fallback_lp=https%3A%2F%2Fapps.apple.com%2Fapp%2Fpocket-save-read-grow%2Fid309601447","pocket"],[a.fxDesktop,`https://www.mozilla.org/firefox/new/?utm_source=${b}&utm_medium=referral&utm_campaign=bento&utm_content=desktop`,"fx-desktop"],[a.fxMobile,`http://mozilla.org/firefox/mobile?utm_source=${b}&utm_medium=referral&utm_campaign=bento&utm_content=desktop`,"fx-mobile"],[a.fxLockwise,"https://bhqf.adj.st/?adjust_t=6tteyjo&adj_deeplink=lockwise%3A%2F%2F&adj_fallback=https%3A%2F%2Fwww.mozilla.org%2Fen-US%2Ffirefox%2Flockwise","fx-lockwise"]]}function createAndAppendEl(a,b,c=null){const d=document.createElement(b);return c&&d.setAttribute("class",c),a.appendChild(d),d}async function getlocalizedBentoStrings(){let a;try{const b=document.body.dataset.serverUrl,c=await fetch(`${b}/getBentoStrings`,{mode:"cors"});a=await c.json()}catch(b){a={bentoButtonTitle:"Firefox apps and services",bentoHeadline:"Firefox is tech that fights for your online privacy.",bentoBottomLink:"Made by Mozilla",mobileCloseBentoButtonTitle:"Close menu",fxDesktop:"Firefox Browser for Desktop",fxMobile:"Firefox Browser for Mobile",fxSend:"Firefox Send",fxMonitor:"Firefox Monitor",fxLockwise:"Firefox Lockwise",pocket:"Pocket"}}return a}class FirefoxApps extends HTMLElement{constructor(){super()}async connectedCallback(){this._currentSite=document.body.dataset.bentoAppId,this._localizedBentoStrings=await getlocalizedBentoStrings(),this._active=!1,this._frag=document.createDocumentFragment(),this._bentoButton=createAndAppendEl(this._frag,"button","fx-bento-button toggle-bento"),this.addTitleAndAriaLabel(this._bentoButton,this._localizedBentoStrings.bentoButtonTitle),this._bentoWrapper=document.createElement("div"),this._bentoWrapper.classList="fx-bento-content-wrapper",this._bentoHideOverflow=createAndAppendEl(this._bentoWrapper,"div","fx-bento-hide-overflow"),this._bentoContent=createAndAppendEl(this._bentoHideOverflow,"div","fx-bento-content"),this._mobileCloseBentoButton=createAndAppendEl(this._bentoContent,"button","fx-bento-mobile-close toggle-bento"),this.addTitleAndAriaLabel(this._mobileCloseBentoButton,this._localizedBentoStrings.mobileCloseBentoButtonTitle),[this._bentoButton,this._mobileCloseBentoButton].forEach(a=>{a.addEventListener("click",this)}),this._logoHeadlineWrapper=createAndAppendEl(this._bentoContent,"div","fx-bento-headline-logo-wrapper"),this._firefoxLogo=createAndAppendEl(this._logoHeadlineWrapper,"div","fx-bento-logo"),this._messageTop=createAndAppendEl(this._logoHeadlineWrapper,"span","fx-bento-headline"),this._messageTop.textContent=this._localizedBentoStrings.bentoHeadline,this._appList=this.makeAppList(),this._messageBottomLink=createAndAppendEl(this._bentoContent,"a","fx-bento-bottom-link fx-bento-link"),this._messageBottomLink.textContent=this._localizedBentoStrings.bentoBottomLink,this._messageBottomLink.href="https://www.mozilla.org/",this._bentoContent.querySelectorAll("a").forEach((a,b)=>{a.dataset.bentoLinkOrder=b,a.addEventListener("click",this),a.tabIndex="-1"}),this._frag.appendChild(this._bentoWrapper),this.appendChild(this._frag),this.addEventListener("close-bento-menu",this)}addTitleAndAriaLabel(a,b){["title","aria-label"].forEach(c=>{a.setAttribute(c,b)})}metricsSendEvent(a,b){if("undefined"!=typeof ga)return ga("send","event","bento",a,b)}handleEvent(a){const b=()=>(this.handleBentoFocusTrap(),window.removeEventListener("resize",this.handleBentoHeight),window.removeEventListener("click",this),document.removeEventListener("keydown",this),this.metricsSendEvent("bento-closed",this._currentSite),this.classList.remove("fx-bento-open"),this._bentoWrapper.classList.add("fx-bento-fade-out"),void setTimeout(()=>{this._bentoWrapper.classList.remove("fx-bento-fade-out"),this._bentoButton.blur(),this.classList=[]},500)),c="keydown"===a.type,d=a.target;if(!c&&["fx-bento-content active","fx-bento-headline","fx-bento-logo","fx-bento-headline-logo-wrapper"].includes(d.className)||c&&![27,40,38].includes(a.keyCode))return;if(null===((a,b)=>{for(;a.parentElement;)if(a=a.parentElement,a.tagName===b)return a;return null})(a.target,"FIREFOX-APPS"))return this._active=!this._active,b();if(a.preventDefault(),a.stopPropagation(),c){const c=a=>{const b=document.activeElement,c=this._bentoContent.querySelectorAll("a");if(!b.dataset.bentoLinkOrder)return void c[0].focus();const d=parseInt(b.dataset.bentoLinkOrder),e=parseInt(d+a);c[e]&&c[e].focus()};switch(a.keyCode){case 27:return this._active=!this._active,void b();case 40:c(1);break;case 38:c(-1);}return}this._active=!this._active;const e=a.target.classList,f=e.contains("fx-bento-bottom-link");if(e.contains("fx-bento-app-link")||f){const a=new URL(d.href);if(a.searchParams.append("utm_source",this._currentSite),a.searchParams.append("utm_medium","referral"),a.searchParams.append("utm_campaign","bento"),f)return this.metricsSendEvent("bento-app-link-click","Mozilla"),window.open(a,"_blank","noopener"),b();const c=d.dataset.bentoAppLinkId;return(this.metricsSendEvent("bento-app-link-click",c),e.contains("fx-bento-current-site"))?(window.location=a,b()):(window.open(a,"_blank","noopener"),b())}if(!this._active)return b();const g=new Event("bento-was-opened");return document.dispatchEvent(g),this.metricsSendEvent("bento-opened",this._currentSite),this.handleBentoHeight(),document.addEventListener("keydown",this),window.addEventListener("resize",this.handleBentoHeight),window.addEventListener("click",this),this.classList=["active fx-bento-open"],this._bentoButton.focus(),this.handleBentoFocusTrap()}handleBentoHeight(){const a=document.querySelector(".fx-bento-content"),b=window.innerHeight,c=b-a.offsetTop-100,d=500>b&&500<window.innerWidth;a.style.maxHeight=d?`${c}px`:"1000px",a.classList.toggle("fx-bento-enable-scrolling",d)}handleBentoFocusTrap(){const a=document.querySelectorAll("a:not(.fx-bento-app-link):not(.fx-bento-bottom-link), button:not(.toggle-bento ), input, select, option, [tabindex]"),b=this._bentoContent.querySelectorAll(".fx-bento-app-link, .fx-bento-bottom-link");return this._active?(a.forEach(a=>{-1<a.tabIndex&&(a.dataset.oldTabIndex=a.tabIndex),a.tabIndex=-1}),void b.forEach(a=>{a.tabIndex=0})):void(a.forEach(a=>a.dataset.oldTabIndex?(a.tabIndex=a.dataset.oldTabIndex,void delete a.dataset.oldTabIndex):void(a.tabIndex=0)),b.forEach(a=>{a.tabIndex=-1}))}makeAppList(){const a=getFxAppLinkInfo(this._localizedBentoStrings,this._currentSite);a.forEach(a=>{const b=document.createElement("a"),c=createAndAppendEl(b,"span",`fx-bento-app-link-span ${a[2]}`);b.setAttribute("class",`fx-bento-app-link fx-bento-link ${a[2]}`),c.textContent=a[0],["href","data-bento-app-link-id"].forEach((c,d)=>{b.setAttribute(c,a[d+1])}),b.dataset.bentoAppLinkId===this._currentSite&&b.classList.add("fx-bento-current-site"),this._bentoContent.appendChild(b)})}}"undefined"==typeof customElements?document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("hide-bento")}):customElements.define("firefox-apps",FirefoxApps),"use strict";const hasParent=(a,b)=>{for(;a.parentNode;)if(a=a.parentNode,a.dataset&&a.dataset.analyticsId===b)return a;return null},setMetricsIds=a=>{hasParent(a,"scan-another-email")&&(a.dataset.eventCategory="Scan Another Email Form")};function getLocation(){const a=document.querySelectorAll("[data-page-label]");return 0<a.length?`Page ID: ${a[0].dataset.pageLabel}`:"Page ID: Undefined Page"}async function sendPing(a,b,c=null){if("undefined"!=typeof ga&&!a.classList.contains("hide")){c||(c=`${getLocation()}`);const d=`[v2] ${a.dataset.eventCategory}`;return d.includes("Scan")&&(c=`${c} [Signed in user: ${document.body.dataset.signedInUser}]`),ga("send","event",d,b,c)}}function appendFxaParams(a,b){return getUTMNames().forEach(c=>{b[c]&&a.searchParams.append(c,encodeURIComponent(b[c]))}),a}function getFxaUtms(a){return sessionStorage?appendFxaParams(a,sessionStorage):appendFxaParams(a,document.body.dataset)}function saveReferringPageData(a){if(sessionStorage)return void getUTMNames().forEach(b=>{a.get(b)&&(sessionStorage[b]=a.get(b))})}function getUTMNames(){return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"]}(()=>{const a=window,b=a.location.search;let c=a.location;_dntEnabled()||function(b,c,d,e,f,g,h){b.GoogleAnalyticsObject=f,b[f]=b[f]||function(){(b[f].q=b[f].q||[]).push(arguments)},b[f].l=1*new Date,g=c.createElement(d),h=c.getElementsByTagName(d)[0],g.async=1,g.src=e,h.parentNode.insertBefore(g,h)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),(b.includes("token=")||b.includes("hash="))&&(c=c.toString().replace(/[?&]token=[A-Za-z0-9_-]+/,"").replace(/&hash=[A-Za-z0-9_-]+/,""),a.history.replaceState({},"",c));const d="undefined"!=typeof ga,e=b.includes("utm_"),f=()=>{e&&a.history.replaceState({},"",c.toString().replace(/[?&]utm_.*/g,""))};e&&saveReferringPageData(new URL(c).searchParams),d?(ga("create","UA-77033033-16"),ga("set","anonymizeIp",!0),ga("set","transport","beacon"),document.getElementById("new-scan-page")&&ga("set","dimension5","newScanPage"),ga("send","pageview",{hitCallback:function(){f()}}),document.querySelectorAll(".send-ga-ping").forEach(a=>{a.addEventListener("click",async a=>{const b=a.target.dataset.eventCategory,c=a.target.dataset.eventAction,d=a.target.dataset.eventLabel;ga("send","event",b,c,d)})})):f();const g=a=>(hasParent(a,"scan-another-email")&&(a.dataset.eventCategory="Scan Another Email Form"),void(a.dataset.entrypoint&&hasParent(a,"sign-up-banner")&&(a.dataset.eventCategory=`${a.dataset.eventCategory} - Banner`,a.dataset.entrypoint=`${a.dataset.entrypoint}-banner`)));if(document.querySelectorAll("#scan-user-email, .open-oauth").forEach(a=>{g(a)}),document.querySelectorAll(".open-oauth").forEach(async a=>{const b=new URL("/metrics-flow?",document.body.dataset.fxaAddress);try{const c=await fetch(b,{credentials:"omit"});if(b.searchParams.append("entrypoint",encodeURIComponent(a.dataset.entrypoint)),c&&200===c.status){const{flowId:b,flowBeginTime:d}=await c.json();a.dataset.flowId=b,a.dataset.flowBeginTime=d}}catch(a){}}),"undefined"!=typeof ga){const a=getLocation();if("Scan Results"===a){const b=document.querySelectorAll(".breach-card");ga("send","event","[v2] Breach Count","Returned Breaches",`${a}`,b.length)}document.querySelectorAll(["#scan-user-email","#add-another-email-form",".open-oauth"]).forEach(b=>{sendPing(b,"View",a),["BUTTON","A"].includes(b.tagName)&&b.addEventListener("click",async()=>{await sendPing(b,"Engage",a)})}),document.querySelectorAll("[data-ga-link]").forEach(a=>{a.addEventListener("click",async b=>{const c=`Link ID: ${b.target.dataset.eventLabel}`;await sendPing(a,"Click",`${c}`)})})}})(),"use strict";function toggleMenu(a){a.stopPropagation();const b=document.querySelectorAll("button, a:not(.fxa-menu-link), input"),c=document.querySelectorAll(".fxa-menu-link"),d=document.body.classList;if(d.toggle("menu-open"),d.contains("menu-open")){const a=document.querySelector("firefox-apps");if(a._active){const b=new Event("close-bento-menu");a.dispatchEvent(b)}return document.addEventListener("bento-was-opened",toggleMenu),window.addEventListener("click",toggleMenu),b.forEach(a=>{a.tabIndex=-1}),void c.forEach(a=>{a.tabIndex=0})}b.forEach(a=>{a.tabIndex=0}),c.forEach(a=>{a.tabIndex=-1}),document.removeEventListener("bento-was-opened",toggleMenu),window.removeEventListener("click",toggleMenu)}const avatar=document.querySelector(".avatar-wrapper");if(avatar){avatar.addEventListener("click",toggleMenu);const a=document.querySelectorAll(".fxa-menu-link");avatar.addEventListener("focus",()=>{avatar.addEventListener("keydown",a=>[32,13].includes(a.keyCode)?(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(a)):27===a.keyCode&&document.body.classList.contains("menu-open")?toggleMenu(a):void 0)}),a.forEach(a=>{a.addEventListener("focus",()=>{a.addEventListener("keyup",a=>{27===a.keyCode&&(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(a))})})})}if("use strict","undefined"==typeof TextEncoder){const a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.src="/dist/edge.min.js",b.parentNode.insertBefore(a,b)}function findAncestor(a,b){for(;(a=a.parentElement)&&!a.classList.contains(b););return a}function toggleEl(a){const b=a.target,c=findAncestor(b,"toggle-parent");["inactive","active"].forEach(a=>{c.classList.toggle(a)})}function isValidEmail(a){const b=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test((a+"").toLowerCase())}function doOauth(a){let b=new URL("/oauth/init",document.body.dataset.serverUrl);if(b=getFxaUtms(b),["flowId","flowBeginTime","entrypoint"].forEach(c=>{b.searchParams.append(c,encodeURIComponent(a.dataset[c]))}),sessionStorage&&0<sessionStorage.length){const a=sessionStorage.getItem(`scanned_${sessionStorage.length}`);a&&b.searchParams.append("email",a)}window.location.assign(b)}function addFormListeners(){Array.from(document.forms).forEach(a=>{if(a.querySelector("input[type=email]")){const b=a.querySelector("input[type=email]");b.addEventListener("keydown",()=>{a.classList.remove("invalid")}),b.addEventListener("invalid",b=>{b.preventDefault(),a.classList.add("invalid")}),b.addEventListener("keydown",()=>{""===b.value&&sendPing(a,"Engage")}),b.addEventListener("focus",()=>{""===b.value&&sendPing(a,"Engage")})}a.addEventListener("submit",a=>handleFormSubmits(a))})}function handleFormSubmits(a){a.preventDefault();const b=a.target;let c="";return(sendPing(b,"Submit"),b.email&&(c=b.email.value.trim(),b.email.value=c),b.email&&!isValidEmail(c))?(sendPing(b,"Failure"),void b.classList.add("invalid")):b.classList.contains("email-scan")?void hashEmailAndSend(a):(b.classList.add("loading-data"),b.submit())}function restoreInputs(){Array.from(document.forms).forEach(a=>{a.classList.remove("loading-data"),a.classList.remove("invalid")}),document.querySelectorAll("input").forEach(a=>{a.disabled&&(a.disabled=!1)})}function toggleDropDownMenu(a){return a.classList.contains("mobile-menu-open")?a.classList.remove("mobile-menu-open"):a.classList.add("mobile-menu-open")}function toggleArticles(){const a=window.innerWidth,b=document.querySelectorAll(".st-toggle-wrapper");return 600<a?void b.forEach(a=>{a.classList.add("active"),a.classList.remove("inactive")}):void b.forEach(a=>{a.classList.remove("active"),a.classList.add("inactive")})}function hideShowNavBars(a,b,c){a.onscroll=function(){return 600<a.innerWidth?void(b.classList=["show-nav-bars"]):100>a.pageYOffset?void(b.classList=["show-nav-bars"]):this.oldScroll<this.scrollY&&b.classList.contains("show-nav-bars")&&!c.classList.contains("active")?(b.classList=["hide-nav-bars"],void(this.oldScroll=this.scrollY)):this.oldScroll>this.scrollY+50?(b.classList=["show-nav-bars"],void(this.oldScroll=this.scrollY)):void(this.oldScroll=this.scrollY)}}function toggleMobileFeatures(a){const b=window,c=b.innerWidth;if(800<c){const a=document.querySelectorAll(".mw-750.email-card:not(.zero-breaches)");return void a.forEach(a=>{a.classList.add("active")})}const d=document.querySelector(".fx-bento-content"),e=document.querySelectorAll(".mw-750.email-card.active");e.forEach(a=>{a.classList.remove("active")}),600>c&&(hideShowNavBars(b,a,d),addBentoObserver())}function toggleHeaderStates(a,b){400<b.pageYOffset?a.classList.add("show-shadow"):a.classList.remove("show-shadow")}function styleActiveLink(a){let b=`.nav-link[href='${a}']`;const c=document.querySelector(b);return c?c.firstChild.classList.add("active-link"):-1===a.indexOf("/dashboard")?-1===a.indexOf("/security-tips")?void 0:document.querySelector(".nav-link[href*='/security-tips']").firstChild.classList.add("active-link"):(b=b.replace("user/dashboard",""),document.querySelector(b).firstChild.classList.add("active-link"))}function addBentoObserver(){const a=document.body.classList,b=document.querySelector(".fx-bento-content"),c=new MutationObserver(function(c){for(const d of c)"attributes"===d.type&&a.toggle("bento-open",b.classList.contains("active"))});c.observe(b,{attributes:!0})}(async()=>{document.addEventListener("touchstart",function(){},!0);const a=window,b=document.getElementById("header"),c=document.querySelector("#navigation-wrapper");a.addEventListener("pageshow",function(){const d=document.querySelector(".active-link");d&&d.classList.remove("active-link"),styleActiveLink(a.location.href),toggleMobileFeatures(c),toggleArticles(),toggleHeaderStates(b,a),document.forms?(restoreInputs(),addFormListeners()):null}),a.addEventListener("resize",()=>{toggleMobileFeatures(c),toggleArticles()}),document.addEventListener("scroll",()=>toggleHeaderStates(b,a)),document.querySelectorAll(".breach-logo:not(.lazy-img)").forEach(a=>{a.addEventListener("error",a=>{a.target.src="/img/svg/placeholder.svg"})}),document.querySelectorAll(".toggle").forEach(a=>{a.addEventListener("click",toggleEl)}),document.querySelectorAll(".open-oauth").forEach(a=>{a.addEventListener("click",a=>doOauth(a.target))});const d=document.querySelector(".mobile-nav.show-mobile");d.addEventListener("click",()=>toggleDropDownMenu(d))})(),"use strict";async function sha1(a){a=a.toLowerCase();const b=new TextEncoder("utf-8").encode(a);let c=/edge/i.test(navigator.userAgent)?libpolycrypt.sha1(b):await crypto.subtle.digest("SHA-1",b);const d=Array.from(new Uint8Array(c)),e=d.map(a=>("00"+a.toString(16)).slice(-2)).join("");return e.toUpperCase()}async function hashEmailAndSend(a){a.preventDefault();const b=a.target;let c=document.getElementById("scan-email").value;b.classList.add("loading-data"),b.querySelector("input[name=emailHash]").value=await sha1(c),sessionStorage&&(sessionStorage.setItem(`scanned_${sessionStorage.length+1}`,c),b.querySelector("input[name=scannedEmailId]").value=sessionStorage.length),c="",sendPing(b,"Success"),b.submit()}"use strict",(()=>{function a(a){const b=a.target,c=b.nextElementSibling;[b,c].forEach(a=>{["show","hide"].forEach(b=>{a.classList.toggle(b)})})}const b=document.querySelectorAll(".show-remaining-breaches");for(const c of b)c.addEventListener("click",a);if(document.getElementById("scannedEmail")){const a=document.getElementById("scannedEmail"),b=a.dataset.scannedEmailId;a.textContent=sessionStorage.getItem(`scanned_${b}`)}})();